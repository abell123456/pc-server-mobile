'use strict';

var fs = require('co-fs');
var path = require('path');

/**
 * Middleware factory.
 * @return {Function}
 */
module.exports = function (root) {
    return function *(next) {
    	var req = this.request;
    	var parts = req.pathname.split('/');
    	var appfolder = path.join(root, parts[1]);

    	if (!(yield fs.exists(appfolder))) {
    		yield next;
    	}
    };
};
